{"version":3,"file":"data-table.js","sourceRoot":"","sources":["../../../src/lib/data-table/data-table.ts"],"names":[],"mappings":";;;;;;;;;;;;OAAO,EACL,SAAS,EACT,SAAS,EACT,YAAY,EACZ,KAAK,EACL,MAAM,EAEN,QAAQ,EAER,eAAe,EAEf,iBAAiB,EACjB,QAAQ,EAET,MAAM,eAAe;OACf,EAAE,YAAY,EAAE,MAAM,iBAAiB;OACvC,EAAE,WAAW,EAAE,MAAM,gBAAgB;OACrC,EAAE,eAAe,EAAE,MAAM,iBAAiB;AAEjD;IAAA;IAGA,CAAC;IAAD,0BAAC;AAAD,CAAC,AAHD,IAGC;AAqBD;IAwEE,sBAAoB,OAAwB;QAAxB,YAAO,GAAP,OAAO,CAAiB;QArEpC,kBAAa,GAAG,KAAK,CAAC;QACtB,UAAK,GAAe,EAAE,CAAC;QACvB,gBAAW,GAAW,CAAC,CAAC;QACxB,iBAAY,GAAW,IAAI,CAAC;QAC5B,YAAO,GAA2B,EAAE,CAAC;QACrC,eAAU,GAAW,KAAK,CAAC;QAyDzB,qBAAgB,GAAG,IAAI,YAAY,EAAU,CAAC;QAC9C,iBAAY,GAAG,IAAI,YAAY,EAAqB,CAAC;QACrD,oBAAe,GAAG,IAAI,YAAY,EAAU,CAAC;QAEvD,iBAAY,GAAG,IAAI,YAAY,EAAa,CAAC;QAC7C,iBAAY,GAAG,IAAI,YAAY,EAAa,CAAC;QAG3C,IAAI,CAAC,IAAI,GAAG,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;IAC5C,CAAC;IA7DD,sBAAI,iCAAO;aAAX,cAAgB,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;aACpC,UAAY,KAAiB;YAC3B,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,KAAK,KAAK,CAAC,CAAC,CAAC;gBACzB,IAAI,CAAC,KAAK,GAAG,KAAK,IAAI,EAAE,CAAC;gBACzB,IAAI,CAAC,eAAe,EAAE,CAAC;gBACvB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;YAC5B,CAAC;QACH,CAAC;;;OAPmC;IAUpC,sBAAI,oCAAU;aAAd,cAAmB,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;aAC7C,UAAe,KAAa;YAC1B,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,KAAK,KAAK,CAAC,CAAC,CAAC;gBAC/B,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;YAC3B,CAAC;QACH,CAAC;;;OAL4C;IAQ7C,sBAAI,qCAAW;aAAf,cAAoB,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;aAC/C,UAAgB,KAAa;YAC3B,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,KAAK,KAAK,CAAC,CAAC,CAAC;gBAChC,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;gBAC1B,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;gBACrC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;YAC5B,CAAC;QACH,CAAC;;;OAP8C;IAU/C,sBAAI,gCAAM;aAAV,cAAe,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;aACrC,UAAW,KAA6B;YACtC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,KAAK,KAAK,CAAC,CAAC,CAAC;gBAC3B,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;gBACrB,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;oBACV,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,IAAI,CAAC,MAAM,EAAE,SAAS,EAAE,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC;gBAC7E,CAAC;gBACD,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;YAC5B,CAAC;QACH,CAAC;;;OAToC;IAYrC,sBAAI,mCAAS;aAAb,cAAkB,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;aAC3C,UAAc,KAAa;YACzB,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,KAAK,KAAK,IAAI,KAAK,KAAK,MAAM,CAAC,CAAC,CAAC,CAAC;gBAC3C,OAAO,CAAC,IAAI,CAAC,yDAAyD,EAAE,KAAK,CAAC,CAAC;gBAC/E,KAAK,GAAG,KAAK,CAAC;YAChB,CAAC;YACD,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,KAAK,KAAK,CAAC,CAAC,CAAC;gBAC9B,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;gBACxB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;YAC5B,CAAC;QACH,CAAC;;;OAV0C;IAuB3C,gCAAS,GAAT;QACE,IAAI,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAC3C,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;YACZ,IAAI,CAAC,eAAe,EAAE,CAAC;YACvB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QAC5B,CAAC;QACD,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,QAAQ,EAAE,CAAC;YAChB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YAC7B,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;QAC7B,CAAC;IACH,CAAC;IAED,8BAAO,GAAP;QACE,MAAM,CAAC,EAAE,MAAM,EAAE,IAAI,CAAC,MAAM,EAAE,SAAS,EAAE,IAAI,CAAC,SAAS,EAAE,CAAC;IAC5D,CAAC;IAED,8BAAO,GAAP,UAAQ,MAAyB,EAAE,SAAiB;QAClD,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,KAAK,MAAM,IAAI,IAAI,CAAC,SAAS,KAAK,SAAS,CAAC,CAAC,CAAC;YAC3D,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;YACrB,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;YAC3B,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;YAC1B,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,MAAM,EAAE,SAAS,EAAE,SAAS,EAAE,CAAC,CAAC;YACjE,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACpC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAC5C,CAAC;IACH,CAAC;IAED,8BAAO,GAAP;QACE,MAAM,CAAC;YACL,UAAU,EAAE,IAAI,CAAC,UAAU;YAC3B,WAAW,EAAE,IAAI,CAAC,WAAW;YAC7B,UAAU,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM;SAChC,CAAC;IACJ,CAAC;IAED,8BAAO,GAAP,UAAQ,UAAkB,EAAE,WAAmB;QAC7C,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,KAAK,WAAW,IAAI,IAAI,CAAC,UAAU,KAAK,UAAU,CAAC,CAAC,CAAC;YACvE,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,KAAK,UAAU;gBAC9C,UAAU,GAAG,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,WAAW,EAAE,WAAW,CAAC,CAAC;YAC1E,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;YAC/B,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;YAC1B,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC;gBACrB,UAAU,EAAE,IAAI,CAAC,UAAU;gBAC3B,WAAW,EAAE,IAAI,CAAC,WAAW;gBAC7B,UAAU,EAAE,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC;aACnD,CAAC,CAAC;YACH,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAC9C,CAAC;IACH,CAAC;IAEO,6CAAsB,GAA9B,UAA+B,mBAA2B,EAAE,kBAA0B;QACpF,IAAI,cAAc,GAAG,CAAC,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,GAAG,mBAAmB,GAAG,CAAC,CAAC;QACrE,IAAI,aAAa,GAAG,IAAI,CAAC,IAAI,CAAC,cAAc,GAAG,kBAAkB,CAAC,CAAC;QACnE,MAAM,CAAC,aAAa,CAAC;IACvB,CAAC;IAEO,sCAAe,GAAvB;QAAA,iBAcC;QAbC,IAAI,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC;QACjE,EAAE,CAAC,CAAC,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;YAC/B,IAAI,CAAC,WAAW,GAAG,QAAQ,IAAI,CAAC,CAAC;YACjC,UAAU,CAAC;gBACT,KAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,KAAI,CAAC,UAAU,CAAC,CAAC;YAC9C,CAAC,EAAE,EAAE,CAAC,CAAC;QACT,CAAC;QAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QAEV,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC;YACrB,UAAU,EAAE,IAAI,CAAC,UAAU;YAC3B,WAAW,EAAE,IAAI,CAAC,WAAW;YAC7B,UAAU,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM;SAChC,CAAC,CAAC;IACL,CAAC;IAEO,+BAAQ,GAAhB;QAAA,iBAYC;QAXC,IAAI,MAAM,GAAG,CAAC,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC;QACtD,IAAI,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC;QACxB,IAAI,OAAO,GAAG,IAAI,CAAC,SAAS,KAAK,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;QACjD,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;YAChB,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,UAAC,CAAM,EAAE,CAAM;gBAC9B,IAAI,CAAC,GAAG,KAAI,CAAC,uBAAuB,CAAC,CAAC,CAAC,CAAC;gBACxC,IAAI,CAAC,GAAG,KAAI,CAAC,uBAAuB,CAAC,CAAC,CAAC,CAAC;gBACxC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,OAAO,CAAC;YACpD,CAAC,CAAC,CAAC;QACL,CAAC;QACD,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC;IAC5D,CAAC;IAEO,8CAAuB,GAA/B,UAAgC,KAAU;QACxC,EAAE,CAAC,CAAC,OAAO,IAAI,CAAC,MAAM,KAAK,QAAQ,IAAI,IAAI,CAAC,MAAM,YAAY,MAAM,CAAC,CAAC,CAAC;YACrE,GAAG,CAAC,CAAuB,UAAsB,EAAtB,KAAA,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,EAAtB,cAAsB,EAAtB,IAAsB,CAAC;gBAA7C,IAAI,cAAc,SAAA;gBACrB,KAAK,GAAG,KAAK,CAAC,cAAc,CAAC,CAAC;aAC/B;QACH,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,KAAK,GAAG,KAAK,CAAC,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC,CAAC;QAClC,CAAC;QACD,EAAE,CAAC,CAAC,KAAK,IAAI,OAAO,KAAK,KAAK,QAAQ,IAAI,KAAK,YAAY,MAAM,CAAC,CAAC,CAAC;YAClE,MAAM,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC;QAC7B,CAAC;QACD,MAAM,CAAC,KAAK,CAAC;IACf,CAAC;IAnKD;QAAC,KAAK,EAAE;;+CAAA;IAUR;QAAC,KAAK,EAAE;;kDAAA;IAQR;QAAC,KAAK,EAAE;;mDAAA;IAUR;QAAC,KAAK,EAAE;;8CAAA;IAYR;QAAC,KAAK,EAAE;;iDAAA;IAaR;QAAC,MAAM,EAAE;;0DAAA;IACT;QAAC,MAAM,EAAE;;sDAAA;IACT;QAAC,MAAM,EAAE;;yDAAA;IAvEX;QAAC,SAAS,CAAC;YACT,QAAQ,EAAE,gBAAgB;YAC1B,QAAQ,EAAE,cAAc;SACzB,CAAC;;oBAAA;IAkLF,mBAAC;AAAD,CAAC,AAjLD,IAiLC;AAYD;IAOE,4BAAoB,SAAuB;QAAvB,cAAS,GAAT,SAAS,CAAc;QAH3C,WAAM,GAAY,KAAK,CAAC;QACxB,YAAO,GAAY,KAAK,CAAC;IAGzB,CAAC;IAED,qCAAQ,GAAR;QAAA,iBAKC;QAJC,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,SAAS,CAAC,UAAC,KAAgB;YACrD,KAAI,CAAC,MAAM,GAAG,CAAC,KAAK,CAAC,MAAM,KAAK,KAAI,CAAC,SAAS,IAAI,KAAK,CAAC,SAAS,KAAK,KAAK,CAAC,CAAC;YAC7E,KAAI,CAAC,OAAO,GAAG,CAAC,KAAK,CAAC,MAAM,KAAK,KAAI,CAAC,SAAS,IAAI,KAAK,CAAC,SAAS,KAAK,MAAM,CAAC,CAAC;QACjF,CAAC,CAAC,CAAC;IACL,CAAC;IAED,kCAAK,GAAL;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;YAChB,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;QACjD,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;QAChD,CAAC;IACH,CAAC;IArBD;QAAC,KAAK,EAAE;;yDAAA;IAZV;QAAC,SAAS,CAAC;YACT,QAAQ,EAAE,aAAa;YACvB,WAAW,EAAE,WAAW;YACxB,SAAS,EAAE,CAAC,iBAAiB,CAAC;YAC9B,IAAI,EAAE;gBACJ,yBAAyB,EAAE,mBAAmB;gBAC9C,SAAS,EAAE,SAAS;aACrB;YACD,aAAa,EAAE,iBAAiB,CAAC,IAAI;SACtC,CAAC;;0BAAA;IA0BF,yBAAC;AAAD,CAAC,AAzBD,IAyBC;AASD;IAWE,uBAAiC,UAAwB;QAX3D,iBAkCC;QAvBkC,eAAU,GAAV,UAAU,CAAc;QATjD,gBAAW,GAAW,CAAC,CAAC;QAEvB,mBAAc,GAAQ,EAAE,CAAC;QAIlC,gBAAW,GAAW,CAAC,CAAC;QAmBhB,2BAAsB,GAAG,UAAC,KAAgB;YAChD,KAAI,CAAC,WAAW,GAAG,KAAK,CAAC,UAAU,CAAC;YACpC,KAAI,CAAC,YAAY,GAAG,KAAK,CAAC,WAAW,CAAC;YACtC,KAAI,CAAC,WAAW,GAAG,KAAK,CAAC,UAAU,CAAC;YACpC,KAAI,CAAC,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,KAAI,CAAC,WAAW,GAAG,KAAI,CAAC,YAAY,CAAC,CAAC;QACnE,CAAC,CAAA;IArB4D,CAAC;IAE9D,iCAAS,GAAT;QACE,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,UAAU,CAAC;QACjD,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC;QACrD,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,SAAS,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC;IACpE,CAAC;IAED,gCAAQ,GAAR,UAAS,UAAkB;QACzB,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAU,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;IACvD,CAAC;IAED,gCAAQ,GAAR,UAAS,KAAU;QACjB,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,EAAE,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;IACjE,CAAC;IArBD;QAAC,KAAK,EAAE;;yDAAA;IACR;QAAC,KAAK,EAAE;;mDAAA;IAZV;QAAC,SAAS,CAAC;YACT,QAAQ,EAAE,gBAAgB;YAC1B,WAAW,EAAE,iBAAiB;YAC9B,SAAS,EAAE,CAAC,gBAAgB,CAAC;YAC7B,QAAQ,EAAE,eAAe;YACzB,aAAa,EAAE,iBAAiB,CAAC,IAAI;SACtC,CAAC;mBAYc,QAAQ,EAAE;;qBAZxB;IAmCF,oBAAC;AAAD,CAAC,AAlCD,IAkCC;AAED,OAAO,IAAM,yBAAyB,GAAU;IAC9C,YAAY;IACZ,kBAAkB;IAClB,aAAa;CACd,CAAC;AAOF;IAAA;IAMA,CAAC;IALQ,0BAAO,GAAd;QACE,MAAM,CAAC;YACL,QAAQ,EAAE,kBAAkB;SAC7B,CAAC;IACJ,CAAC;IAVH;QAAC,QAAQ,CAAC;YACR,OAAO,EAAE,CAAC,YAAY,EAAE,WAAW,EAAE,eAAe,CAAC,OAAO,EAAE,CAAC;YAC/D,OAAO,EAAE,yBAAyB;YAClC,YAAY,EAAE,yBAAyB;SACxC,CAAC;;0BAAA;IAOF,yBAAC;AAAD,CAAC,AAND,IAMC","sourcesContent":["import {\n  Component,\n  Directive,\n  EventEmitter,\n  Input,\n  Output,\n  OnInit,\n  Optional,\n  DoCheck,\n  IterableDiffers,\n  IterableDiffer,\n  ViewEncapsulation,\n  NgModule,\n  ModuleWithProviders,\n} from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Md2SelectModule } from '../select/index';\n\nexport class Md2PaginationChange {\n  source: Md2Pagination;\n  activePage: number;\n}\n\nexport interface SortEvent {\n  sortBy: string | string[];\n  sortOrder: string;\n}\n\nexport interface PageEvent {\n  activePage: number;\n  rowsPerPage: number;\n  dataLength: number;\n}\n\nexport interface DataEvent {\n  length: number;\n}\n\n@Directive({\n  selector: 'table[md2Data]',\n  exportAs: 'md2DataTable'\n})\nexport class Md2DataTable implements DoCheck {\n\n  private diff: IterableDiffer;\n  private isDataChanged = false;\n  private _data: Array<any> = [];\n  private _activePage: number = 1;\n  private _rowsPerPage: number = 1000;\n  private _sortBy: string | Array<string> = '';\n  private _sortOrder: string = 'asc';\n\n  data: Array<any>;\n\n  @Input()\n  get md2Data() { return this._data; }\n  set md2Data(value: Array<any>) {\n    if (this._data !== value) {\n      this._data = value || [];\n      this.recalculatePage();\n      this.isDataChanged = true;\n    }\n  }\n\n  @Input()\n  get activePage() { return this._activePage; }\n  set activePage(value: number) {\n    if (this._activePage !== value) {\n      this._activePage = value;\n    }\n  }\n\n  @Input()\n  get rowsPerPage() { return this._rowsPerPage; }\n  set rowsPerPage(value: number) {\n    if (this._rowsPerPage !== value) {\n      this._rowsPerPage = value;\n      this.setPage(this.activePage, value);\n      this.isDataChanged = true;\n    }\n  }\n\n  @Input()\n  get sortBy() { return this._sortBy; }\n  set sortBy(value: string | Array<string>) {\n    if (this._sortBy !== value) {\n      this._sortBy = value;\n      if (value) {\n        this.onSortChange.next({ sortBy: this.sortBy, sortOrder: this.sortOrder });\n      }\n      this.isDataChanged = true;\n    }\n  }\n\n  @Input()\n  get sortOrder() { return this._sortOrder; }\n  set sortOrder(value: string) {\n    if (!(value === 'asc' || value === 'desc')) {\n      console.warn('sortOrder value must be one of [\"asc\", \"desc\"], but is:', value);\n      value = 'asc';\n    }\n    if (this._sortOrder !== value) {\n      this._sortOrder = value;\n      this.isDataChanged = true;\n    }\n  }\n\n  @Output() activePageChange = new EventEmitter<number>();\n  @Output() sortByChange = new EventEmitter<string | string[]>();\n  @Output() sortOrderChange = new EventEmitter<string>();\n\n  onSortChange = new EventEmitter<SortEvent>();\n  onPageChange = new EventEmitter<PageEvent>();\n\n  constructor(private differs: IterableDiffers) {\n    this.diff = differs.find([]).create(null);\n  }\n\n  ngDoCheck(): any {\n    let changes = this.diff.diff(this.md2Data);\n    if (changes) {\n      this.recalculatePage();\n      this.isDataChanged = true;\n    }\n    if (this.isDataChanged) {\n      this.fillData();\n      this.diff.diff(this.md2Data);\n      this.isDataChanged = false;\n    }\n  }\n\n  getSort(): SortEvent {\n    return { sortBy: this.sortBy, sortOrder: this.sortOrder };\n  }\n\n  setSort(sortBy: string | string[], sortOrder: string) {\n    if (this.sortBy !== sortBy || this.sortOrder !== sortOrder) {\n      this.sortBy = sortBy;\n      this.sortOrder = sortOrder;\n      this.isDataChanged = true;\n      this.onSortChange.next({ sortBy: sortBy, sortOrder: sortOrder });\n      this.sortByChange.emit(this.sortBy);\n      this.sortOrderChange.emit(this.sortOrder);\n    }\n  }\n\n  getPage(): PageEvent {\n    return {\n      activePage: this.activePage,\n      rowsPerPage: this.rowsPerPage,\n      dataLength: this.md2Data.length\n    };\n  }\n\n  setPage(activePage: number, rowsPerPage: number): void {\n    if (this.rowsPerPage !== rowsPerPage || this.activePage !== activePage) {\n      this.activePage = this.activePage !== activePage ?\n        activePage : this.calculateNewActivePage(this.rowsPerPage, rowsPerPage);\n      this.rowsPerPage = rowsPerPage;\n      this.isDataChanged = true;\n      this.onPageChange.emit({\n        activePage: this.activePage,\n        rowsPerPage: this.rowsPerPage,\n        dataLength: this.md2Data ? this.md2Data.length : 0\n      });\n      this.activePageChange.emit(this.activePage);\n    }\n  }\n\n  private calculateNewActivePage(previousRowsPerPage: number, currentRowsPerPage: number): number {\n    let firstRowOnPage = (this.activePage - 1) * previousRowsPerPage + 1;\n    let newActivePage = Math.ceil(firstRowOnPage / currentRowsPerPage);\n    return newActivePage;\n  }\n\n  private recalculatePage() {\n    let lastPage = Math.ceil(this.md2Data.length / this.rowsPerPage);\n    if (lastPage < this.activePage) {\n      this._activePage = lastPage || 1;\n      setTimeout(() => {\n        this.activePageChange.emit(this.activePage);\n      }, 10);\n    } else { }\n\n    this.onPageChange.emit({\n      activePage: this.activePage,\n      rowsPerPage: this.rowsPerPage,\n      dataLength: this.md2Data.length\n    });\n  }\n\n  private fillData() {\n    let offset = (this.activePage - 1) * this.rowsPerPage;\n    let data = this.md2Data;\n    let sortInt = this.sortOrder === 'desc' ? -1 : 1;\n    if (this.sortBy) {\n      data = data.sort((a: any, b: any) => {\n        let x = this.caseInsensitiveIteratee(a);\n        let y = this.caseInsensitiveIteratee(b);\n        return ((x > y) ? 1 : (y > x) ? -1 : 0) * sortInt;\n      });\n    }\n    this.data = data.slice(offset, offset + this.rowsPerPage);\n  }\n\n  private caseInsensitiveIteratee(value: any) {\n    if (typeof this.sortBy === 'string' || this.sortBy instanceof String) {\n      for (let sortByProperty of this.sortBy.split('.')) {\n        value = value[sortByProperty];\n      }\n    } else {\n      value = value[this.sortBy + ''];\n    }\n    if (value && typeof value === 'string' || value instanceof String) {\n      return value.toLowerCase();\n    }\n    return value;\n  }\n\n}\n\n@Component({\n  selector: '[md2SortBy]',\n  templateUrl: 'sort.html',\n  styleUrls: ['data-table.scss'],\n  host: {\n    '[class.md2-sort-active]': '_isAsc || _isDesc',\n    '(click)': '_sort()'\n  },\n  encapsulation: ViewEncapsulation.None\n})\nexport class Md2DataTableSortBy implements OnInit {\n\n  @Input() md2SortBy: string;\n\n  _isAsc: boolean = false;\n  _isDesc: boolean = false;\n\n  constructor(private _md2Table: Md2DataTable) {\n  }\n\n  ngOnInit() {\n    this._md2Table.onSortChange.subscribe((event: SortEvent) => {\n      this._isAsc = (event.sortBy === this.md2SortBy && event.sortOrder === 'asc');\n      this._isDesc = (event.sortBy === this.md2SortBy && event.sortOrder === 'desc');\n    });\n  }\n\n  _sort() {\n    if (this._isAsc) {\n      this._md2Table.setSort(this.md2SortBy, 'desc');\n    } else {\n      this._md2Table.setSort(this.md2SortBy, 'asc');\n    }\n  }\n\n}\n\n@Component({\n  selector: 'md2-pagination',\n  templateUrl: 'pagination.html',\n  styleUrls: ['data-table.css'],\n  exportAs: 'md2Pagination',\n  encapsulation: ViewEncapsulation.None\n})\nexport class Md2Pagination {\n\n  private _activePage: number = 1;\n\n  @Input() rowsPerPageSet: any = [];\n  @Input() md2Table: Md2DataTable;\n\n  _rowsPerPage: number;\n  _dataLength: number = 0;\n  _lastPage: number;\n\n  constructor( @Optional() private _dataTable: Md2DataTable) { }\n\n  ngDoCheck() {\n    this.md2Table = this.md2Table || this._dataTable;\n    this.onPageChangeSubscriber(this.md2Table.getPage());\n    this.md2Table.onPageChange.subscribe(this.onPageChangeSubscriber);\n  }\n\n  _setPage(pageNumber: number): void {\n    this.md2Table.setPage(pageNumber, this._rowsPerPage);\n  }\n\n  _setRows(event: any): void {\n    this.md2Table.setPage(this._activePage, parseInt(event.value));\n  }\n\n  private onPageChangeSubscriber = (event: PageEvent) => {\n    this._activePage = event.activePage;\n    this._rowsPerPage = event.rowsPerPage;\n    this._dataLength = event.dataLength;\n    this._lastPage = Math.ceil(this._dataLength / this._rowsPerPage);\n  }\n\n}\n\nexport const MD2_DATA_TABLE_DIRECTIVES: any[] = [\n  Md2DataTable,\n  Md2DataTableSortBy,\n  Md2Pagination\n];\n\n@NgModule({\n  imports: [CommonModule, FormsModule, Md2SelectModule.forRoot()],\n  exports: MD2_DATA_TABLE_DIRECTIVES,\n  declarations: MD2_DATA_TABLE_DIRECTIVES,\n})\nexport class Md2DataTableModule {\n  static forRoot(): ModuleWithProviders {\n    return {\n      ngModule: Md2DataTableModule\n    };\n  }\n}\n"]}